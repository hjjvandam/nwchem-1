#!/bin/bash
#
# $Id$
#
#---   backup the nwchemrc file
#
if [ -f ~/.nwchemrc ]; then
  if [ -f ~/nwchemrc-backup ]; then
    echo "ERROR: Cannot backup ~/.nwchemrc: ~/nwchemrc-backup already exists"
    exit 100;
  else
    mv ~/.nwchemrc ~/nwchemrc-backup; chmod 400 ~/nwchemrc-backup;
  fi
fi
#
#---   create an nwchemrc file appropriate for the tests
#---   however environment variables are preferred to avoid clashes with other 
#---   calculation on the same machine so where possible we will use those
#
here="`pwd`"
echo "# Automatically generated by $0 on system `hostname` on `date`" > ~/.nwchemrc
export NWCHEM_NWPW_LIBRARY="${here}/../src/nwpw/libraryps/"
export NWCHEM_BASIS_LIBRARY="${here}/../src/basis/libraries/"
export NWCHEM_SCRATCH_DIR="${here}/scratchdir"
export NWCHEM_PERMANENT_DIR="${here}/scratchdir"
#export NWCHEM_MEMORY_TOTAL=65536000 # 500 MB
echo "# By default use AMBER force field"                   >> ~/.nwchemrc
echo "ffield amber"                                         >> ~/.nwchemrc
echo "# For both AMBER and CHARMM :"                        >> ~/.nwchemrc
echo "# - standard parameters in directory ending in _s"    >> ~/.nwchemrc
echo "# - extended parameters in directory ending in _x"    >> ~/.nwchemrc
echo "amber_1  ${here}/../src/data/amber_s/"                >> ~/.nwchemrc
echo "amber_2  ${here}/../src/data/amber_x/"                >> ~/.nwchemrc
echo "spce     ${here}/../src/data/solvents/spce.rst"       >> ~/.nwchemrc
echo "charmm_s ${here}/../src/data/charmm_s/"               >> ~/.nwchemrc
echo "charmm_x ${here}/../src/data/charmm_x/"               >> ~/.nwchemrc

